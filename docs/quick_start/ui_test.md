MeterSphere UI 测试提供了元素库、UI 自动化、测试报告等UI测试相关功能。 用户可以使用多级模块来组织管理项目下的 UI 自动化场景，执行场景，生成查看测试报告。

## 1 企业版试用
UI 测试模块是企业版 X-Pack 功能增强包功能，如需使用，请点击：[申请企业版试用](https://jinshuju.net/f/CzzAOe)。

## 2 在线体验环境
在线体验环境:
https://www.metersphere.com/

## 3 注意事项

!!! info "UI 自动化测试工作前注意事项"
    1. 修改 /opt/metersphere/.env 文件，MS_SELENIARM_ENABLED=true 修改配置后加载配置文件执行 msctl reload<br>
    2. docker ps 检查 local-selenium-grid 容器是否成功启动<br>
    3. 在 MeterSphere 系统参数设置中修改 selenium-docker 地址为http://local-selenium-grid:4444 
    4. UI 测试用例，默认勾选 "性能模式" 没有截图展示，不勾选 "性能测试" 可以查看每个步骤的截图<br>
    5. 如果导入 License 成功后，依然没有 UI 测试模块，请到【用户组与权限】处配置 UI 模块权限

## 4 创建模块
MeterSphere 通过模块树的方式组织管理场景，用户可以在左侧查看到UI自动化场景的模块树。 点击左侧的模块树中的 【添加子模块】按钮，为该项目添加模块。
![!使用UI测试](../img/ui_test/使用UI测试1.png)

## 5 创建元素
点击左侧的模块树中的【添加子模块】 按钮，添加模块，然后创建元素。元素库可用于场景步骤中元素的选择。
![!使用UI测试](../img/ui_test/使用UI测试2.png)

![!使用UI测试](../img/ui_test/使用UI测试3.png)

![!使用UI测试](../img/ui_test/使用UI测试4.png)

## 6 创建场景
用户可在各个模块中添加场景，可以手动创建，也可以通过导入的方式创建UI自动化场景。

### 6.1 导入 Selenium IDE 脚本
![!使用UI测试](../img/ui_test/使用UI测试5.png)

![!使用UI测试](../img/ui_test/使用UI测试6.png)

### 6.2 手动创建场景
6.2.1 点击右侧场景列表中的 `创建场景` 按钮。
![!使用UI测试](../img/ui_test/使用UI测试7.png)

6.2.2 在打开的【用例编辑】页面中填写名称、模块、状态、责任人等详细信息。<br>
![!使用UI测试](../img/ui_test/使用UI测试8.png)

6.2.3 点击页面右下角【+】号，可以添加场景步骤，场景步骤中的操作对象可以选择【元素对象】或者【元素定位】，【元素对象】是从元素库中选取配置好的元素，【元素定位】需要用元素定位的方式去定位元素。<br>
6.2.4 以登录 MeterSphere 系统为例，添加如下几个步骤：<br>
6.2.4.1 添加【浏览器操作】步骤，输入 MeterSphere 登录页面地址。 <br>
![!使用UI测试](../img/ui_test/使用UI测试9.png)

6.2.4.2 添加【输入用户名】步骤 <br>
添加【输入操作】步骤，操作对象选择【元素定位】，定位方式选择【xpath】，xpath 路径输入  //input[@placeholder="ID 或 邮箱"] <br>
![!使用UI测试](../img/ui_test/使用UI测试10.png)

6.2.4.3 获取 xpath 路径方式如下（以谷歌浏览器为例）：<br>
按下 F12 打开当前页的【元素】界面，选中左上方的【鼠标】按钮，拖到登录界面的【普通登录】上，点击鼠标可快速定位到【普通登录】的 html 元素内容，输入【Ctrl+F】，根据元素内容的关键属性，在文本框中输入 xpath 路径，即可快速定位到元素，如果元素内容变黄，则表示 xpath 成功定位到元素。<br>
![!使用UI测试](../img/ui_test/使用UI测试11.png)

6.2.4.4 添加【输入密码】步骤，方式同上，xpath 路径输入 //input[@placeholder="密码"]。<br>
![!使用UI测试](../img/ui_test/使用UI测试_11.png)

6.2.4.5 添加【点击登录】步骤，方式同上，xpath 路径输入 //span[text()=" 登录 "]。<br>
![!使用UI测试](../img/ui_test/使用UI测试_12.png)

## 7 在场景步骤中添加高级设置
在高级设置中，以后置操作为例，选择 后置操作 ，点击下拉框，选择需要的方式，点击添加。可以添加后置脚本，等待时间，断言和后置提取。
![!使用UI测试](../img/ui_test/使用UI测试12.png)

![!使用UI测试](../img/ui_test/使用UI测试13.png)

## 8 调试 UI 自动化场景
可在编辑场景页面调试UI场景，也可以在UI自动化场景列表页面执行UI场景。
![!使用UI测试](../img/ui_test/使用UI测试14.png)

![!使用UI测试](../img/ui_test/使用UI测试15.png)

## 9 生成测试报告
点击场景列表中执行按钮，会弹出页面显示本次场景的执行结果。也可在测试报告页面中，找到要查看的报告，点击其【报告详情】按钮打开【测试报告】页面查看测试报告。
![!使用UI测试](../img/ui_test/使用UI测试16.png)

![!使用UI测试](../img/ui_test/使用UI测试17.png)