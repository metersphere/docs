## 工作空间成员管理
>同系统下工作空间操作

###成员

点击左侧`工作空间`下拉菜单中的`成员`进入成员界面，查看当前工作空间中的所有成员信息。可以对成员进行新增，修改，查询，删除操作

![工作空间](../../img/system_management1/工作空间.png)

- 添加成员

点击`添加成员`按钮添加成员户，在弹出页面中选择要添加的用户。

![!添加成员](../../img/system_management1/添加成员.png)

	参数说明：
      1） 可根据用户 ID 和用户邮箱搜索需要添加的用户，系统支持可一次添加多个成员
	  2） 可选择用户组，此下拉信息的用户组，其“所属类型”属于“组织级别”的用户组，系统支持可一次添加多个用户组
	  3） 点击“确认”完成组织成员添加


- 编辑成员

在成员信息中可点击“编辑”和“移除”进行成员修改和成员移除操作
![!编辑成员](../../img/system_management1/编辑成员.png)

-  查询用户

可按名称来模糊查询成员信息，输入查询信息，点击回车即可完成查询

![查询成员用户](../../img/system_management1/查询成员用户.png)

###服务集成

可查看当前工作空间里集成的缺陷管理平台，并设置和修改当前工作空间需要将测试用例缺陷数据同步的缺陷管理平台
点击`工作空间`菜单栏，点击`服务集成`，即可查看当前工作空间已集成的缺陷管理平台，同时可点击`编辑`集成 TAPD、JIRA 和禅道缺陷平台。

Metersphere 平台与管理工具集成设置可分为三步骤来完成。

1. 首先配置和项目管理工具集成设置；
2.  其次配置项目相关信息；
3.  然后为每个登录用户设置各自的个人账号，此配置也可以不设置。


![!服务集成](../../img/system_management1/服务集成首页.png)




#### 与Jira集成

- 第一步：填写对接Jira的地址、认证信息和问题类型，如下

![!填写jira](../../img/system_management1/填写jira.png)

注意：问题类型需要和 JIRA 的事务类型保持一致，必须在 Jira 中存在此类型，如下：

![!备注](../../img/system_management1/备注.png)


如果右上角切换组织，需要重复上诉对接 Jira 操作

- 第二步： 关联项目配置

配置完服务集成后，还需要配置项目中引用 JIRA 项目的设置，即关联项目。点击页面右下角的`马上关联项目`进行设置

![!jira关联](../../img/system_management1/jira关联.png)

打开项目，设置项目相关配置。 

![!jira关联项目](../../img/system_management1/jira关联项目.png)

1. 【集成第三方平台】：选择“JIRA”
1. 【缺陷模板】：选择“JIRA-默认模板”
1. 【使用 Jira 缺陷模板】：选中，则表示系统会自动同步 JIRA系统中的缺陷模板；不选择，则需要进入第四步，手动配置 MS 缺陷模板和 Jira 系统中的缺陷模板的字段对应关系。
1. 【JIRA 项目 Key】：项目的关键字的需要在 Jira 平台上进行查询，如下

![!jira项目](../../img/system_management1/jira项目.png)

- 第三步：添加个人平台账号

点击服务集成页面右下角的`马上添加`进行设置

![!jira关联第三方帐号](../../img/system_management1/jira关联第三方帐号.png)

该信息为通过 Jira 提交缺陷的用户认证信息，若未填写，则使用组织中配置的默认信息.点击`第三方平台账号`设置`Jira 信息`，如果不设置个人平台账号，则所有使用 MeterSphere 提交缺陷的用户，此缺陷推送到配置的服务平台上账号都是服务配置中设定的账号信息

![!设置第三方信息](../../img/system_management1/设置第三方信息.png)

以上配置完成后，在 Metersphere 系统中测试用例里，就可以关联JIRA 的相关需求，或同步相关缺陷。  


![!关联需求](../../img/system_management1/关联需求.png)

![!同步缺陷](../../img/system_management1/同步缺陷.png)

- 第四步：自定义字段同步设置 （MS1.16 版本前）

MeterSphere 版本 1.16 之前的版本需要单独设置。或者项目配置中没有勾选`使用 Jira 缺陷模板`，则需要手动配置 MeterSphere 和 JIRA 缺陷模板的对应关系。在模版管理模块，创建自定义字段，使用场景可以分别选择添加到用例模版或缺陷模版

![!自定义字段](../../img/system_management1/自定义字段.png)

以`经办人`字段为例，字段类型选择`单选下拉列表`；选项值需要到 JIRA 中的`人员`入口点击`搜索人员和团队`，然后选择需要添加为经办人的人员

![!人员](../../img/system_management1/人员.png)

![!搜索人员和团队](../../img/system_management1/搜索人员和团队.png)

选中经办人后，把经办人的名称填写到 Metersphere 的`选项内容`里；以及可以通过 URL 查看 ID 填写到 Metersphere 的`选项值`里

![!选项内容](../../img/system_management1/选项内容.png)

![!选项值](../../img/system_management1/选项值.png)

自定义字段创建成功后，进入缺陷模版模块，在模版列表里选择进入JITA 模版页面，点击`添加字段`按钮。

![!添加字段](../../img/system_management1/添加字段.png)

![!添加字段1](../../img/system_management1/添加字段1.png)

添加的自定义字段会出现在已选字段的列表,选择字段值,以及通过访问这个地址来查询经办人的API字段名，填写到 Metersphere 里。
https://developer.atlassian.com/cloud/jira/platform/rest/v3/api-group-issues/#api-rest-api-3-issue-post

![!jira-填写信息](../../img/system_management1/jira-填写信息.png)

保存成功后，该自定义字段就会出现在 Metersphere 创建缺陷的页面里

![!jira-查看字段](../../img/system_management1/jira-查看字段.png)

保存并提交缺陷后，缺陷同步到 JIRA 中就会出现经办人字段

![!jira-缺陷同步](../../img/system_management1/jira-缺陷同步.png)

#### 与TAPD集成 

- 第一步：服务集成配置

![!TAPD-配置](../../img/system_management1/TAPD-配置.png)

参数说明：API 账号和口令：是 Tapd Basic Auth 账号信息在"公司管理-安全与集成-开放平台"中查询

- 第二步：关联项目配置

配置完服务集成后，还需要配置项目中引用TAPD项目的设置，即关联项目。点击页面右下角的“马上关联项目”进行设置

![!TAPD-马上关联项目](../../img/system_management1/TAPD-马上关联项目.png)

打开项目，编辑项目里“TAPD 项目 ID”，以及缺陷模板等相关信息

![!TAPD-编辑信息](../../img/system_management1/TAPD-编辑信息.png)

同时，还需要配置项目中的 TAPD 缺陷模板设置，`缺陷模板`需要选择`TAPD-默认模板`

![!TAPD-默认模板](../../img/system_management1/TAPD-默认模板.png)

- 第三步：添加个人平台账号

点击服务集成页面右下角的`马上添加`进行设置

![!TAPD-马上添加](../../img/system_management1/TAPD-马上添加.png)

该信息为通过 TAPD 提交缺陷的用户认证信息，若未填写，则使用组织中配置的默认信息

选择`第三方平台账号`设置`Tapd`信息，如果不设置个人平台账号，则所有使用 MeterSphere 提交缺陷的用户，此缺陷推送到配置的服务平台上账号都是服务配置中设定的账号信息。

![!TAPD-第三方平台账号](../../img/system_management1/TAPD-第三方平台账号.png)

参数说明：TAPD 昵称是 TAPD 个人设置里查看

![!TAPD-昵称](../../img/system_management1/TAPD-昵称.png)

以上配置完成后，在 Metersphere 系统中测试用例里，就可以关联TAPD 的相关需求

![!TAPD-关联需求](../../img/system_management1/TAPD-关联需求.png)

在缺陷管理提交缺陷后，数据会同步到TAPD系统中

![!TAPD-同步需求](../../img/system_management1/TAPD-同步需求.png)

在 TAPD 缺陷中可以查询到同步过来的缺陷数据

![!TAPD-查询需求](../../img/system_management1/TAPD-查询需求.png)

- 第四步：自定义字段同步设置

缺陷模板支持自定义字段，（自定义字段的设置同上文与 JIRA 集成第四步），设置好的字段会出现在字段的列表中，选择字段名并设置 API 字
段名。API 字段名通过 TAPD 接口链接查询 https://www.tapd.cn/<项目号>/dashboard/workspace/view

![!TAPD-自定义字段同步设置](../../img/system_management1/TAPD-自定义字段同步设置.png)

#### 与禅道集成

- 第一步：服务集成配置

![!禅道-服务集成配置](../../img/system_management1/禅道-服务集成配置.png)

禅道目前存在 GET 和 PATH_INFO 两种接口调用方式（即其requestType 参数）对于禅道接口的调用使用的是 PATH_INFO 方式和 GET 请求方式的支持，用户可以根据自己使用的禅道系统的配置情况自主选择请求方式。

	说明：

	    1. 账号密码为具有相应权限的 Zentao 账号，账号需要具有超级 model 调用接口权限
        2. 请求方式：在禅道里具体查看：参考禅道配置文件中$config->requestType 的值；配置文件参考路径：/opt/zbox/app/zentao/config/my.php
	    3. 如果提示因为安全问题 api 禁用，需要修改禅道服务器配置文件，加上 $config->features->apiGetModel = true; 此配置

- 第二步： 关联项目配置

配置完服务集成后，还需要配置项目中引用禅道项目的设置，即关联项目。点击页面右下角的`马上关联项目`进行设置

![!禅道-马上关联项目](../../img/system_management1/禅道-马上关联项目.png)

打开项目，编辑项目里`禅道项目ID`，以及缺陷模板等相关信息

![!禅道-禅道项目ID](../../img/system_management1/禅道-禅道项目ID.png)

参数说明：Zentao（禅道）项目 ID：如果 禅道 bug 是附属在项目上，则关联的Zentao ID 为项目 ID；如果 禅道 bug 是附属在产品上，则关联的 ZentaoID 为产品 ID

- 第三步：添加个人平台账号

点击服务集成页面右下角的`马上添加`进行设置

![!禅道-马上添加](../../img/system_management1/禅道-马上添加.png)

该信息为通过禅道提交缺陷的的用户名、密码，若未填写，则使用组织中配置的默认信息

选择`第三方平台账号`设置`禅道信息`，如果不设置个人平台账号，则所有使用 MeterSphere 提交缺陷的用户，此缺陷推送到配置的服务平台上账号都是服务配置中设定的账号信息。

![!禅道-第三方平台账号](../../img/system_management1/禅道-第三方平台账号.png)

以上配置完成后，在 Metersphere 系统中测试用例里，就可以关联禅道的相关需求

![!禅道-相关需求](../../img/system_management1/禅道-相关需求.png)

在缺陷管理提交缺陷后，数据会同步到禅道系统中

![!禅道-同步需求](../../img/system_management1/禅道-同步需求.png)

- 第四步：自定义字段同步设置

缺陷模板支持自定义字段，（自定义字段的设置同上文与 JIRA 集成第四步），设置好的字段会出现在字段的列表中，选择字段名并设置 API 字段名。API 字段名通过禅道接口链接查询 http://<IP>/zentao/dev-api-bug.html

![!禅道-自定义字段同步设置](../../img/system_management1/禅道-自定义字段同步设置.png)

#### 与Azure Devops集成

- 第一步：服务集成配置

![!Azure-服务集成配置](../../img/system_management1/Azure-服务集成配置.png)

- 第二步： 关联项目配置

配置完服务集成后，还需要配置项目中引用Azure Devops项目的设置，即关联项目。点击页面右下角的`马上关联项目`进行设置

![!Azure-马上关联项目](../../img/system_management1/Azure-马上关联项目.png)

- 第三步：添加个人平台账号

点击服务集成页面右下角的`马上添加`进行设置

![!Azure-第三方平台账号](../../img/system_management1/Azure-第三方平台账号.png)

- 第四步：自定义字段同步设置

缺陷模板支持自定义字段，（自定义字段的设置同上文与 JIRA 集成第四步），设置好的字段会出现在字段的列表中，选择字段名并设置 API 字段名。


###消息设置

针对系统的每个功能都支持用户根据需要进行任务通知设置。点击`工作空间`，点击`消息设置`即可进入消息设置页面

![!消息通知](../../img/system_management1/消息通知首页.png)

并且系统支持接收人员按角色或指定具体人员；同时支持站内通知和站外通知多种通知方式等功能

- 测试跟踪任务通知 

测试跟踪的每个页面：首页、测试用例、用例评审、测试计划、测试报告、缺陷管理等等页面都支持自定义任务通知。

![!消息设置-设置](../../img/system_management1/消息设置-设置.png) 测试计划-新建

同时测试跟踪页面上的每个关键操作，都可以支持用户自定义任务通知。比如测试计划的新建、更新、删除、执行完成等，都可以设置相应的任务通知。

![!测试计划-新建](../../img/system_management1/测试计划-新建.png) 

- 接口测试任务通知

接口测试的每个页面：首页、接口定义、接口自动化、测试报告等等页面都支持自定义任务通知

![!接口-首页](../../img/system_management1/接口-首页.png) 

同时接口测试页面上的每个关键操作，都可以支持用户自定义任务通知。比如接口定义中 API 相关的增删改、CASE 相关的增删改等等操作，都可以设置相应的任务通知。

![!接口-新建](../../img/system_management1/接口-新建.png) 

- 性能测试任务通知

性能测试的每个页面：测试、测试报告等等页面都支持自定义任务通知

![!性能测试任务通知-首页](../../img/system_management1/性能测试任务通知-首页.png) 

同时性能测试页面上的每个关键操作，都可以支持用户自定义任务通知。比如测试的新建、更新、删除、执行完成等等操作，都可以设置相应的任务通知。

![!性能测试任务通知-新建](../../img/system_management1/性能测试任务通知-新建.png) 

- Jenkins任务通知

自动化通过 Jenkins 持续部署来启动 MeterSphere 自动化脚本时，可以在这里设置此类型的任务通知。

![!Jenkins任务通知-首页](../../img/system_management1/Jenkins任务通知-首页.png) 

Jenkins 任务通知自动化通过 Jenkins 持续部署来启动 MeterSphere 自动化脚本时，可以在这里设置此类型的任务通知。


![!Jenkins任务通知-新建](../../img/system_management1/Jenkins任务通知-新建.png) 









###环境管理

工作空间下所有测试相关环境统一管理。此环境配置管理即是当前工作空间的 所有项目的 所有环境信息，可对当前工作空间的环境进行添加、修改及移除的操作。并且支持各个环境配置信息的导入和导出，方便客户快速新建和维护测试环境

点击页面左侧`工作空间`，点击`环境配置`，即可查看当前工作空间中的所有项目的所有环境列表。

#### 环境列表
- 创建环境

点击页面列表信息左上角的`创建环境`，可新增此工作空间下任意项目的测试环境

![!创建环境](../../img/system_management1/创建环境.png)

在工作空间下创建环境，需要指定此环境是用于哪个项目，其他环境设置信息同项目管理里的新增环境。

	参数说明：
		1、 选择项目：指定环境所属的项目，此项目是当前工作空间下，有权限的项目列表。
		2、 环境名称：为新创建的环境命名
		3、 其他设置“通用配置”“HTTP 配置”等等，可参考上面【工作空间>>项目管理】的环境配置

- 导入环境

点击`导入`按钮导入环境，仅支持通过metershpere导出的json文件。

![!导入环境](../../img/system_management1/导入环境.png)

导入支持为一个项目批量创建不同的环境。



- 导出环境

点击`导出环境`按钮导出环境，将环境导出的json文件。
![!导出环境](../../img/system_management1/导出环境.png)

- 编辑环境

点击`编辑出环境`按钮编辑环境，可修改环境配置。
![!编辑环境](../../img/system_management1/编辑环境.png)

- 复制环境

点击`复制环境`按钮编辑环境，可复制环境配置。
![!复制环境](../../img/system_management1/复制环境.png)


- 删除环境

点击`删除环境`按钮编辑环境，可删除环境配置。
![!删除环境](../../img/system_management1/删除环境.png)


#### 环境组


- 创建环境组

MeterSphere 支持跨项目进行接口、接口用例、场景用例等自动化脚本引用，可以根据不同项目、已经不同环境组合成一个环境组，当自动化执行时，可以直接选择该环境组。

点击“创建环境组”，选择不同项目、不同环境信息

![!创建环境组](../../img/system_management1/创建环境组.png)

- 编辑环境组

点击`编辑环境组`按钮编辑环境组，可修改、添加、删除环境。
![!编辑环境组](../../img/system_management1/编辑环境组.png)

- 复制环境组

点击`复制环境组`按钮复制环境组。
![!复制环境组](../../img/system_management1/复制环境组.png)

- 删除环境组

点击`复制环境组`按钮复制环境组。
![!删除环境组](../../img/system_management1/删除环境组.png)

###操作日志
> 同系统下操作日志

显示登录用户有权限所有空间的测试资源日志信息

![操作日志](../../img/system_management1/操作日志.png)

###模版管理

系统支持用户自定义用例模板、缺陷模板。
![测试报告模板](../../img/system_management1/测试报告模板.png)

####自定义字段

在自定义模板前（用例&缺陷），需要先自定义模板中字段的基本属性。点击页面左侧`工作空间`，点击`模板管理`>>`自定义字段`，即可查看当前工作空间中的所有自定义字段列表

![自定义字段](../../img/system_management1/自定义字段.png)

- 创建字段

点击页面左上角`创建字段`，设置字段的基本信息：名称、备注、使用场景、字段类型等基本信息，点击`确认`完成工作空间自定义字段添加

![自定义字段](../../img/system_management1/自定义字段.png)


     个别字段说明：
       1） 使用场景：设置定义的字段使用于具体的模板中
       2） 字段类型：系统提供多种字段类型可供选择，根据不同字段类型，系统自动控制字段的显示、设置和属性等。字段支持的类型有输入框、文本框、下来选择框（单选&多选）、日期时间器、数值等等类型，

- 维护字段

创建完成后可在自定义字段列表中查看到添加的自定义字段，在自定义字段信息中可点击`编辑`和`移除`进行自定义字段修改、复制和移除操作。

![维护字段](../../img/system_management1/维护字段.png)


####用例模版

工作空间用例模板即是当前工作空间的所有项目都可使用的测试用例模板，并且可对当前工作空间的用例模板添加、修改、复制及移除的操
作。点击页面左侧`工作空间`，点击`模版管理``用例模版`，即可查看当前工作空间中的所有用例模板列表。
![用例模版](../../img/system_management1/用例模版.png)

- 创建字段

点击页面左上角`创建模板`，创建新的用例模板,设置用例基本信息、模板设置明细信息等等，点击`确认`完成工作空间用例模板添加。如果模板添加的字段信息不存在，可以在`模板管理`>>`自定义字段`中进行创建，然后在此引用即可

![创建模板](../../img/system_management1/创建模板.png)
![填写模板](../../img/system_management1/填写模板.png)


- 维护字段

创建完成后可在用例模板列表中查看到添加的用例模板，在用例模板信息中可点击`编辑`和`移除`进行用例模板修改、复制和移除操作。

![维护模板](../../img/system_management1/维护模板.png)


####缺陷模版

在`模版管理`下拉菜单中点击`缺陷模版`，右侧显示当前工作空间下的缺陷模版列表，支持查询、编辑、复制、删除等操作。点击`创建缺陷模版`按钮新建缺陷模版，在弹出的页面中设置用例基本信息，点击`确认`完成添加。

![用例模版](../../img/system_management1/缺陷模版.png)

- 创建缺陷模板

点击页面左上角`创建缺陷模板`新建缺陷模板，设置用例基本信息、模板设置明细信息等等，点击`确认`完成工作空间缺陷模板添加。如果模板添加字段信息不存在，可以在`模板管理`>>`自定义字段`中进行创建，然后在此引用即可

![创建缺陷模板](../../img/system_management1/创建缺陷模板.png)



- 维护字段

创建完成后可在缺陷模板列表中查看到添加的模板，在缺陷模板信息中可点击`编辑`和“移除”进行缺陷模板修改、复制和移除操作

![维护缺陷模板](../../img/system_management1/维护缺陷模板.png)





